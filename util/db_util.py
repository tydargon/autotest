import pymysqlfrom warnings import filterwarnings#忽略mysql告警信息filterwarnings('ignore', category = pymysql.Warning)class MysqlDb:    #初始化函数    def __init__(self):        #建立连接        self.conn = pymysql.connect(            host = 'localhost',            user = 'root',            passwd = 'root123456',            database = 'xd_test_test'        )        #游标        self.cur = self.conn.cursor(cursor = pymysql.cursors.DictCursor)    #关闭链接函数    def __del__(self):        self.cur.close()        self.conn.close()    #查询函数    def query(self, sql, state='all'):        '''        查询        state=all为查询全部        state = one为查询单条        '''        self.cur.execute(sql)        if state == 'all':            data = self.cur.fetchall()        else:            data = self.cur.fetchone()        return data    #更新数据库函数    def execute(self, sql):        '''        更新，删除，新增        '''        try:            #使用execute操作sql            rows = self.cur.execute(sql)            #提交事务            self.conn.commit()            return rows        except pymysql.err as e:            print('数据库操作异常{0}'.format(e))            #回滚操作            self.conn.rollback()if __name__ == '__main__':    mydb = MysqlDb()    # d = mydb.query('select * from `case`')    d = mydb.execute("insert into `case`('app') values('xd')")    print(d)